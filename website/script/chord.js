let csvData = `Country.of.Origin,Variety
Guatemala,Bourbon
China,Catimor
Costa Rica,Caturra
Brazil,Bourbon
Uganda,SL14
Honduras,Caturra
Brazil,Bourbon
Costa Rica,Caturra
Kenya,SL34
Hawaii,Hawaiian Kona
Thailand,Caturra
Brazil,Yellow Bourbon
Brazil,Yellow Bourbon
China,Bourbon
Kenya,SL28
Brazil,Bourbon
Colombia,Caturra
Kenya,SL28
Guatemala,Bourbon
Uganda,SL14
Colombia,Caturra
Guatemala,Bourbon
Guatemala,Catuai
El Salvador,Bourbon
El Salvador,Bourbon
Hawaii,Hawaiian Kona
Kenya,SL28
Uganda,SL14
Guatemala,Bourbon
Uganda,SL14
Hawaii,Hawaiian Kona
Brazil,Bourbon
China,Catimor
Guatemala,Pacamara
Costa Rica,Caturra
Costa Rica,Caturra
Kenya,SL34
Kenya,SL34
Guatemala,Bourbon
Colombia,Caturra
Colombia,Caturra
Guatemala,Caturra
Colombia,Caturra
Hawaii,Hawaiian Kona
Colombia,Caturra
Uganda,SL14
Colombia,Caturra
Costa Rica,Catuai
Mexico,Typica
Kenya,SL34
Brazil,Mundo Novo
Mexico,Pacamara
Colombia,Caturra
Colombia,Caturra
China,Typica
Colombia,Caturra
Mexico,Typica
Brazil,Bourbon
Brazil,Catuai
China,Typica
Uganda,SL14
Hawaii,Hawaiian Kona
Thailand,Caturra
Kenya,SL34
Honduras,Catuai
El Salvador,Bourbon
Costa Rica,Catuai
Guatemala,Bourbon
Costa Rica,Caturra
Costa Rica,Catuai
China,Typica
Colombia,Caturra
Kenya,SL28
Guatemala,Bourbon
Guatemala,Bourbon
Mexico,Typica
Kenya,SL34
Colombia,Caturra
Kenya,Peaberry
Guatemala,Pacas
Guatemala,Bourbon
Colombia,Caturra
Colombia,Caturra
Kenya,SL28
Colombia,Caturra
Costa Rica,Bourbon
Colombia,Caturra
Brazil,Bourbon
Brazil,Catuai
Costa Rica,Caturra
Uganda,SL14
China,Catimor
Costa Rica,Caturra
Guatemala,Bourbon
Kenya,SL28
Mexico,Typica
Mexico,Typica
Guatemala,Bourbon
Costa Rica,Caturra
Colombia,Caturra
Colombia,Caturra
China,Typica
Hawaii,Hawaiian Kona
Mexico,Pacamara
Kenya,SL28
Honduras,Caturra
Colombia,Caturra
Honduras,Catuai
Colombia,Caturra
Colombia,Caturra
Mexico,Typica
Brazil,Yellow Bourbon
China,Typica
Thailand,Catimor
Colombia,Caturra
Guatemala,Caturra
Guatemala,Caturra
China,Catimor
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
Guatemala,Bourbon
Colombia,Caturra
Hawaii,Hawaiian Kona
Mexico,Typica
Mexico,Bourbon
Mexico,Bourbon
Guatemala,Bourbon
Colombia,Caturra
Costa Rica,Caturra
Guatemala,Caturra
Guatemala,Caturra
Guatemala,Bourbon
Colombia,Caturra
Nicaragua,Caturra
Brazil,Catuai
Costa Rica,Caturra
Kenya,SL28
Brazil,Mundo Novo
Guatemala,Bourbon
El Salvador,Bourbon
Colombia,Caturra
Guatemala,Catuai
Colombia,Caturra
China,Typica
Guatemala,Bourbon
Colombia,Caturra
Guatemala,Bourbon
Hawaii,Hawaiian Kona
Mexico,Typica
Honduras,Caturra
Guatemala,Caturra
Guatemala,Bourbon
Guatemala,Bourbon
Colombia,Caturra
Colombia,Caturra
Brazil,Yellow Bourbon
Colombia,Caturra
Kenya,SL34
Kenya,SL28
Brazil,Bourbon
Mexico,Mundo Novo
Thailand,Catimor
Brazil,Bourbon
China,Typica
Colombia,Caturra
China,Typica
Colombia,Caturra
Mexico,Typica
Mexico,Typica
Mexico,Typica
Colombia,Caturra
Colombia,Caturra
Costa Rica,Caturra
Guatemala,Bourbon
Brazil,Yellow Bourbon
China,Typica
Brazil,Bourbon
Costa Rica,Catuai
Guatemala,Bourbon
Brazil,Yellow Bourbon
Colombia,Caturra
Guatemala,Bourbon
Mexico,Bourbon
Mexico,Pacas
Brazil,Yellow Bourbon
Kenya,SL28
Brazil,Bourbon
Colombia,Caturra
China,Typica
China,Catimor
Colombia,Caturra
Uganda,Bourbon
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
Hawaii,Hawaiian Kona
Mexico,Caturra
Guatemala,Caturra
Brazil,Bourbon
Kenya,SL28
Honduras,Caturra
Nicaragua,Caturra
Brazil,Bourbon
China,Caturra
Colombia,Caturra
Guatemala,Bourbon
Colombia,Caturra
Colombia,Caturra
Guatemala,Bourbon
Guatemala,Bourbon
Colombia,Caturra
Guatemala,Caturra
Guatemala,Bourbon
Mexico,Typica
Indonesia,Typica
Guatemala,Caturra
Brazil,Bourbon
Guatemala,Caturra
Colombia,Caturra
China,Catimor
Colombia,Caturra
Mexico,Caturra
Uganda,SL14
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
China,Typica
Colombia,Caturra
Mexico,Typica
Colombia,Caturra
Brazil,Catuai
Colombia,Caturra
Costa Rica,Caturra
Colombia,Caturra
Guatemala,Bourbon
Colombia,Caturra
Colombia,Caturra
Guatemala,Caturra
Colombia,Caturra
Honduras,Caturra
Colombia,Caturra
Colombia,Caturra
Mexico,Bourbon
Mexico,Typica
Mexico,Pacamara
Guatemala,Caturra
Colombia,Caturra
Guatemala,Bourbon
Colombia,Caturra
Guatemala,Bourbon
Colombia,Caturra
Costa Rica,Caturra
Uganda,SL14
Thailand,Catimor
El Salvador,Bourbon
Colombia,Caturra
Brazil,Yellow Bourbon
Tanzania,Bourbon
Colombia,Caturra
Guatemala,Bourbon
Guatemala,Caturra
Guatemala,Bourbon
Hawaii,Hawaiian Kona
Colombia,Caturra
Thailand,Peaberry
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
Brazil,Catuai
Mexico,Caturra
Colombia,Caturra
Costa Rica,Caturra
Hawaii,Hawaiian Kona
Costa Rica,Catuai
Colombia,Caturra
Guatemala,Bourbon
Hawaii,Hawaiian Kona
Colombia,Caturra
Mexico,Typica
Costa Rica,Catuai
Guatemala,Pacas
Uganda,SL14
Colombia,Caturra
Mexico,Typica
China,Bourbon
China,Typica
Colombia,Caturra
Guatemala,Caturra
Colombia,Caturra
Mexico,Bourbon
Hawaii,Hawaiian Kona
Mexico,Mundo Novo
Mexico,Caturra
Guatemala,Bourbon
Brazil,Yellow Bourbon
Colombia,Caturra
Colombia,Caturra
Brazil,Bourbon
Guatemala,Bourbon
Tanzania,Bourbon
Guatemala,Caturra
Honduras,Catuai
China,Catimor
China,Catimor
El Salvador,Bourbon
Guatemala,Bourbon
Guatemala,Bourbon
Kenya,SL28
Colombia,Caturra
Uganda,SL14
Honduras,Catuai
Honduras,Caturra
Guatemala,Catuai
Hawaii,Hawaiian Kona
Tanzania,Bourbon
Guatemala,Bourbon
Mexico,Typica
Mexico,Typica
Mexico,Pacamara
Colombia,Caturra
Mexico,Typica
Colombia,Caturra
Mexico,Typica
Brazil,Mundo Novo
Brazil,Mundo Novo
Guatemala,Bourbon
Brazil,Mundo Novo
Colombia,Caturra
Colombia,Caturra
Brazil,Yellow Bourbon
Brazil,Yellow Bourbon
China,Typica
Brazil,Mundo Novo
Brazil,Bourbon
Costa Rica,Catuai
Hawaii,Hawaiian Kona
China,Typica
Hawaii,Hawaiian Kona
Hawaii,Hawaiian Kona
Hawaii,Hawaiian Kona
Colombia,Caturra
Brazil,Bourbon
Brazil,Bourbon
Brazil,Bourbon
Uganda,Bourbon
Uganda,Bourbon
Guatemala,Catuai
Guatemala,Catuai
Guatemala,Bourbon
Brazil,Catuai
China,Typica
Uganda,SL14
Guatemala,Bourbon
Costa Rica,Catuai
Brazil,Yellow Bourbon
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
Mexico,Typica
Mexico,Typica
Mexico,Bourbon
Colombia,Arusha
Colombia,Caturra
Colombia,Caturra
Guatemala,Bourbon
Colombia,Caturra
Nicaragua,Caturra
Brazil,Bourbon
El Salvador,Bourbon
Colombia,Caturra
China,Caturra
China,Typica
Mexico,Typica
Mexico,Bourbon
Uganda,SL14
Uganda,SL14
Guatemala,Bourbon
Guatemala,Caturra
Colombia,Caturra
Colombia,Caturra
Guatemala,Bourbon
Mexico,Typica
Mexico,Typica
Hawaii,Hawaiian Kona
Kenya,SL28
Guatemala,Bourbon
Brazil,Yellow Bourbon
El Salvador,Pacas
Guatemala,Bourbon
Brazil,Catuai
Guatemala,Bourbon
Colombia,Typica
Colombia,Caturra
Tanzania,Arusha
Mexico,Caturra
Mexico,Bourbon
Guatemala,Bourbon
Mexico,Typica
Guatemala,Caturra
Guatemala,Caturra
Guatemala,Bourbon
Guatemala,Bourbon
Guatemala,Bourbon
Guatemala,Bourbon
China,Yellow Bourbon
El Salvador,Bourbon
Costa Rica,Caturra
Honduras,Caturra
Brazil,Yellow Bourbon
China,Catimor
China,Catimor
Colombia,Caturra
Malawi,Gesha
Guatemala,Pacas
Colombia,Typica
Hawaii,Hawaiian Kona
Hawaii,Hawaiian Kona
Colombia,Caturra
Mexico,Typica
Mexico,Typica
Mexico,Typica
Colombia,Caturra
Colombia,Caturra
Hawaii,Hawaiian Kona
Brazil,Bourbon
Brazil,Bourbon
El Salvador,Pacas
Brazil,Yellow Bourbon
Brazil,Catuai
Tanzania,Bourbon
China,Typica
Mexico,Typica
Uganda,SL14
China,Typica
Thailand,Caturra
Colombia,Caturra
Guatemala,Caturra
Mexico,Typica
Guatemala,Bourbon
China,Typica
Indonesia,Typica
Thailand,Caturra
Uganda,SL14
Costa Rica,Catuai
Colombia,Caturra
Colombia,Caturra
Colombia,Caturra
Mexico,Typica
Mexico,Typica
Colombia,Caturra
Brazil,Mundo Novo
Brazil,Bourbon
Honduras,Caturra
Guatemala,Bourbon
Thailand,Caturra
Brazil,Yellow Bourbon
Guatemala,Bourbon
Colombia,Caturra
Guatemala,Bourbon
Mexico,Typica
Mexico,Typica
Mexico,Typica
Guatemala,Caturra
Brazil,Bourbon
Colombia,Caturra
Hawaii,Hawaiian Kona
Guatemala,Bourbon
Guatemala,Bourbon
Guatemala,Bourbon
Guatemala,Caturra
Colombia,Caturra
China,Catimor
Brazil,Yellow Bourbon
Guatemala,Caturra
Mexico,Typica
Brazil,Catuai
Brazil,Yellow Bourbon
Mexico,Bourbon
Colombia,Caturra
Mexico,Typica
Mexico,Typica
Mexico,Typica
Mexico,Caturra
Mexico,Typica
Mexico,Pacamara
Mexico,Caturra
Mexico,Bourbon
Mexico,Typica
Colombia,Caturra
Brazil,Arusha
Colombia,Caturra
Honduras,Caturra
Brazil,Catuai
Brazil,Bourbon
Costa Rica,Caturra
Costa Rica,Catuai
China,Catimor
Brazil,Bourbon
Brazil,Mundo Novo
Guatemala,Bourbon
Malawi,Gesha
Brazil,Bourbon
Guatemala,Pacas
Colombia,Caturra
China,Typica
China,Typica
Guatemala,Bourbon
Colombia,Caturra
Mexico,Typica
Guatemala,Bourbon
Mexico,Typica
Mexico,Bourbon
Guatemala,Bourbon
Brazil,Mundo Novo
Mexico,Typica
Brazil,Mundo Novo
Colombia,Caturra
Brazil,Catuai
Guatemala,Pacas
Brazil,Yellow Bourbon
El Salvador,Bourbon
Honduras,Catuai
Malawi,Gesha
Brazil,Bourbon
China,Typica
Mexico,Mundo Novo
Hawaii,Hawaiian Kona
Mexico,Bourbon
Guatemala,Bourbon
Mexico,Bourbon
Mexico,Typica
Mexico,Typica
Mexico,Typica
Colombia,Caturra
Colombia,Caturra
Brazil,Arusha
Brazil,Bourbon
Honduras,Caturra
Tanzania,Bourbon
Brazil,Yellow Bourbon
Honduras,Catuai
Guatemala,Bourbon
Brazil,Mundo Novo
China,Typica
China,Typica
Colombia,Caturra
Mexico,Typica
Guatemala,Caturra
Mexico,Typica
Mexico,Typica
Indonesia,Bourbon
Colombia,Caturra
Brazil,Bourbon
Brazil,Yellow Bourbon
Costa Rica,Caturra
Tanzania,Bourbon
Costa Rica,Caturra
Hawaii,Hawaiian Kona
Mexico,Typica
Mexico,Typica
Mexico,Typica
Mexico,Typica
Hawaii,Hawaiian Kona
Honduras,Caturra
Honduras,Caturra
Brazil,Bourbon
Malawi,Gesha
China,Typica
Costa Rica,Catuai
Honduras,Caturra
Colombia,Caturra
China,Typica
Brazil,Mundo Novo
Mexico,Typica
Brazil,Mundo Novo
Brazil,Catuai
Guatemala,Bourbon
Brazil,Mundo Novo
Guatemala,Bourbon
Colombia,Caturra
Guatemala,Bourbon
Guatemala,Bourbon
Honduras,Caturra
Brazil,Catuai
El Salvador,Bourbon
Guatemala,Catuai
China,Typica
Mexico,Bourbon
Mexico,Typica
Mexico,Mundo Novo
Mexico,Bourbon
Brazil,Mundo Novo
Guatemala,Bourbon
Costa Rica,Catuai
Brazil,Mundo Novo
Guatemala,Bourbon
Brazil,Yellow Bourbon
Brazil,Yellow Bourbon
Mexico,Catuai
Honduras,Catuai
Costa Rica,Caturra
China,Typica
Indonesia,Typica
Malawi,Gesha
Brazil,Bourbon
Honduras,Caturra
Mexico,Typica
Colombia,Caturra
Hawaii,Hawaiian Kona
Brazil,Bourbon
Guatemala,Bourbon
Mexico,Bourbon
Mexico,Typica
Brazil,Mundo Novo
Guatemala,Bourbon
Mexico,Bourbon
Mexico,Mundo Novo
Mexico,Typica
Mexico,Caturra
Mexico,Typica
Colombia,Caturra
Brazil,Bourbon
Guatemala,Bourbon
Guatemala,Bourbon
Honduras,Catuai
Brazil,Yellow Bourbon
Brazil,Bourbon
Honduras,Caturra
Costa Rica,Caturra
China,Typica
China,Typica
Mexico,Typica
Guatemala,Bourbon
Mexico,Typica
Mexico,Bourbon
Mexico,Bourbon
Mexico,Bourbon
Mexico,Caturra
Hawaii,Hawaiian Kona
Honduras,Catimor
Guatemala,Bourbon
China,Typica
Costa Rica,Caturra
Malawi,Gesha
China,Typica
Brazil,Yellow Bourbon
Guatemala,Bourbon
Mexico,Typica
Mexico,Typica
Guatemala,Bourbon
Nicaragua,Caturra
Honduras,Caturra
Guatemala,Bourbon
China,Typica
Costa Rica,Caturra
Malawi,Gesha
China,Typica
Brazil,Yellow Bourbon
China,Typica
Mexico,Typica
Mexico,Typica
Mexico,Catuai
Mexico,Typica
Mexico,Bourbon
Mexico,Typica
Brazil,Bourbon
Guatemala,Bourbon
Mexico,Mundo Novo
Guatemala,Catuai
Brazil,Catuai
Honduras,Catuai
China,Typica
Malawi,Gesha
Brazil,Bourbon
Guatemala,Bourbon
Mexico,Typica
Guatemala,Bourbon
Mexico,Caturra
Mexico,Typica
Colombia,Caturra
Hawaii,Peaberry
Colombia,Caturra
Honduras,Caturra
Brazil,Catuai
Honduras,Catuai
Brazil,Yellow Bourbon
Malawi,Gesha
Honduras,Catuai
Mexico,Typica
Mexico,Typica
Brazil,Catuai
China,Typica
Brazil,Yellow Bourbon
Nicaragua,Catuai
Honduras,Catuai
Guatemala,Pacamara
China,Typica
Guatemala,Caturra
Mexico,Typica
Tanzania,Bourbon
Mexico,Caturra
Costa Rica,Caturra
Honduras,Catuai
Thailand,Caturra
Tanzania,Bourbon
Malawi,Caturra
Costa Rica,Catuai
Brazil,Catuai
Mexico,Typica
Guatemala,Caturra
Brazil,Mundo Novo
Brazil,Mundo Novo
Costa Rica,Caturra
Mexico,Typica
Mexico,Typica
Mexico,Typica
Mexico,Typica
Hawaii,Hawaiian Kona
Brazil,Bourbon
El Salvador,Bourbon
Brazil,Yellow Bourbon
Guatemala,Bourbon
Colombia,Caturra
Guatemala,Bourbon
China,Typica
Honduras,Caturra
Brazil,Mundo Novo
Uganda,SL14
China,Typica
Mexico,Typica
Guatemala,Bourbon
Kenya,SL28
Mexico,Bourbon
Hawaii,Hawaiian Kona
Brazil,Yellow Bourbon
China,Typica
Brazil,Bourbon
Nicaragua,Caturra
Guatemala,Pacas
China,Typica
China,Typica
China,Typica
Mexico,Typica
Thailand,Peaberry
Guatemala,Caturra
Mexico,Catuai
Mexico,Typica
Mexico,Bourbon
Hawaii,Hawaiian Kona
Guatemala,Caturra
Honduras,Caturra
Honduras,Catuai
Honduras,Catuai
Costa Rica,Caturra
Mexico,Typica
Hawaii,Arusha
China,Typica
Guatemala,Bourbon
Costa Rica,Caturra
Malawi,Caturra
Mexico,Typica
Colombia,Caturra
Guatemala,Bourbon
Guatemala,Bourbon
Guatemala,Bourbon
Brazil,Bourbon
Honduras,Caturra
Guatemala,Bourbon
Guatemala,Caturra
Honduras,Catuai
Brazil,Yellow Bourbon
Brazil,Yellow Bourbon
Hawaii,Hawaiian Kona
Guatemala,Bourbon
Mexico,Typica
China,Typica
El Salvador,Bourbon
China,Typica
Mexico,Typica
Mexico,Caturra
Tanzania,Bourbon
China,Yellow Bourbon
Guatemala,Bourbon
Mexico,Typica
Hawaii,Hawaiian Kona
Brazil,Catuai
Honduras,Caturra
Mexico,Caturra
Nicaragua,Caturra
Hawaii,Hawaiian Kona
Colombia,Typica
China,Typica
Guatemala,Caturra
Mexico,Caturra
Nicaragua,Caturra
Honduras,Catuai
Guatemala,Bourbon
Mexico,Typica
Mexico,Typica
Mexico,Bourbon
Guatemala,Bourbon
Brazil,Bourbon
China,Typica
China,Typica
China,Typica
China,Typica
Mexico,Typica
Mexico,Typica
Nicaragua,Caturra
Mexico,Typica
China,Typica
Mexico,Typica
Hawaii,Hawaiian Kona
Mexico,Bourbon
Mexico,Bourbon
Mexico,Catuai
Mexico,Typica
Mexico,Mundo Novo
Kenya,SL34
Guatemala,Bourbon
Nicaragua,Caturra
Mexico,Typica
Hawaii,Hawaiian Kona
Guatemala,Bourbon
China,Typica
China,Typica
Costa Rica,Catuai
Mexico,Typica
Mexico,Bourbon
Mexico,Bourbon
Mexico,Bourbon
Mexico,Typica
Guatemala,Bourbon
Mexico,Typica
Guatemala,Bourbon
El Salvador,Bourbon
Guatemala,Bourbon
Mexico,Typica
Mexico,Caturra
Mexico,Mundo Novo
Thailand,Peaberry
Mexico,Typica
Mexico,Caturra
Nicaragua,Caturra
China,Typica
Colombia,Caturra
Mexico,Caturra
Mexico,Typica
Guatemala,Bourbon
Mexico,Typica
Colombia,Caturra
Mexico,Typica
Mexico,Typica
Guatemala,Bourbon
China,Typica
Mexico,Bourbon
Guatemala,Bourbon
Honduras,Catuai
Guatemala,Bourbon
Guatemala,Catuai
Costa Rica,Catuai
Mexico,Typica
Mexico,Typica
Mexico,Typica
Guatemala,Bourbon
Mexico,Typica
Mexico,Mundo Novo
Mexico,Typica
Honduras,Pacas
Mexico,Mundo Novo
Mexico,Typica
Mexico,Typica
Mexico,Typica
Mexico,Typica
Nicaragua,Caturra
Guatemala,Bourbon
Mexico,Typica
Mexico,Typica
Mexico,Bourbon
China,Typica
Mexico,Caturra
China,Typica
Mexico,Typica
Mexico,Typica
Mexico,Bourbon
Mexico,Typica
Mexico,Caturra
Brazil,Catuai
Mexico,Typica
Hawaii,Hawaiian Kona
Guatemala,Bourbon
Mexico,Typica
Guatemala,Bourbon
Hawaii,Hawaiian Kona
Hawaii,Hawaiian Kona
Mexico,Typica
China,Yellow Bourbon
Honduras,Pacas
Hawaii,Hawaiian Kona
China,Typica
Guatemala,Bourbon
Costa Rica,Caturra
Mexico,Typica
Guatemala,Bourbon
Guatemala,Bourbon
China,Typica
Mexico,Typica
Guatemala,Bourbon
Brazil,Bourbon
Mexico,Typica
Mexico,Typica
Guatemala,Bourbon
Mexico,Typica
Guatemala,Bourbon
Guatemala,Bourbon
Hawaii,Hawaiian Kona
Mexico,Typica
Mexico,Bourbon
Honduras,Pacas
Guatemala,Bourbon
Guatemala,Bourbon
Mexico,Pacamara
Mexico,Mundo Novo
Mexico,Typica
Mexico,Typica
Mexico,Typica
Mexico,Typica
Guatemala,Bourbon
Guatemala,Bourbon
Mexico,Typica
Hawaii,Hawaiian Kona
Guatemala,Bourbon
Mexico,Typica
Mexico,Typica
Mexico,Typica
Hawaii,Hawaiian Kona
Honduras,Pacas
Mexico,Typica
Hawaii,Hawaiian Kona
Costa Rica,Caturra
Mexico,Mundo Novo
Mexico,Bourbon
Mexico,Typica
Honduras,Catuai
Honduras,Catuai
Honduras,Catuai
Mexico,Bourbon
Nicaragua,Caturra
Guatemala,Catuai
Honduras,Caturra`;


let data = d3.csvParse(csvData);
processData(data);

function processData(data) {
    // Create a unique list of countries and varieties
    let countries = [
        ...new Set(data.map((row) => row["Country.of.Origin"])),
    ];
    let varieties = [...new Set(data.map((row) => row["Variety"]))];

    // Initialize a matrix with zeros
    let matrix = new Array(countries.length + varieties.length)
        .fill(0)
        .map(() =>
            new Array(countries.length + varieties.length).fill(0)
        );

    // Fill the matrix with data from the CSV
    data.forEach((row) => {
        let countryIndex = countries.indexOf(row["Country.of.Origin"]);
        let varietyIndex =
            countries.length + varieties.indexOf(row["Variety"]);
        matrix[countryIndex][varietyIndex]++;
        matrix[varietyIndex][countryIndex]++;
    });

    // Create the chord diagram
    createChordDiagram(matrix, [...countries, ...varieties]);
}

function createChordDiagram(matrix, labels) {
    // Set the dimensions of the diagram
    let width = 800;
    let height = 600;
    let outerRadius = Math.min(width, height) * 0.5 - 40;
    let innerRadius = outerRadius - 30;

    // Create the chord layout
    let chord = d3.chord().padAngle(0.05).sortSubgroups(d3.descending)(
        matrix
    );

    // Create the color scale
    let color = d3
        .scaleOrdinal()
        .domain(d3.range(labels.length))
        .range(d3.schemeCategory10);

    // Create the SVG container
    let svg = d3
        .select("body")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
        .attr("transform", `translate(${width / 2}, ${height / 2})`);

    // Draw the outer arcs
    let arc = d3
        .arc()
        .innerRadius(innerRadius)
        .outerRadius(outerRadius);

    svg
        .append("g")
        .attr("class", "arcs")
        .selectAll("path")
        .data(chord.groups)
        .join("path")
        .attr("d", arc)
        .attr("fill", d => color(d.index))
        .attr("stroke", d => d3.rgb(color(d.index)).darker())
        .on("mouseover", (event, d) => {
            // Highlight related chords and arcs
            d3.selectAll(".ribbons path")
                .filter(dd => dd.source.index === d.index || dd.target.index === d.index)
                .transition()
                .style("opacity", 1)

            // Grey out unrelated chords
            d3.selectAll(".ribbons path")
                .filter(dd => dd.source.index !== d.index && dd.target.index !== d.index)
                .transition()
                .style("opacity", 0.1);
        })
        .on("mouseout", (event, d) => {
            // Reset the opacity of chords
            d3.selectAll(".ribbons path")
                .transition()
                .style("opacity", 0.3);
        })
        .append("title")
        .text((d, i) => `${labels[i]} has total ${d.value.toLocaleString()} coffee bean reviews`);
    // Draw the inner chords
    let ribbon = d3.ribbon().radius(innerRadius);

    // Draw the inner chords
    svg.append("g")
        .attr("class", "ribbons")
        .selectAll("path")
        .data(chord)
        .join("path")
        .attr("d", ribbon)
        .attr("fill", d => color(d.source.index))
        .attr("stroke", d => d3.rgb(color(d.source.index)).darker())
        .style("opacity", 0.3)
        .on("mouseover", (event, d) => {
            // Highlight the selected chord
            d3.select(event.currentTarget)
                .transition()
                .style("opacity", 1);

            // Grey out unrelated chords
            d3.selectAll(".ribbons path")
                .filter(dd => dd !== d)
                .transition()
                .style("opacity", 0.05);
        })
        .on("mouseout", (event, d) => {
            // Reset the opacity of all chords
            d3.selectAll(".ribbons path")
                .transition()
                .style("opacity", 0.3);
        })
        .append("title")
        .text(d => `${labels[d.source.index]} and ${labels[d.target.index]} occur together in ${d.source.value.toLocaleString()} coffee bean reviews`);

    // Add labels to the arcs
    svg.append("g")
    .attr("class", "labels")
    .attr("font-size", 10)
    .attr("font-weight", "bold")
    .selectAll("text")
    .data(chord.groups)
    .join("text")
    .attr("transform", d => {
        const angle = (d.startAngle + d.endAngle) / 2;
        const xPos = Math.cos(angle - Math.PI / 2) * (outerRadius + 10);
        const yPos = Math.sin(angle - Math.PI / 2) * (outerRadius + 10);
        return `translate(${xPos}, ${yPos})`;
    })
    .attr("dy", ".35em")
    .attr("text-anchor", d => ((d.startAngle + d.endAngle) / 2 > Math.PI) ? "end" : "start")
    .text((d, i) => labels[i]);
}